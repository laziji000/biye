{"ast":null,"code":"import axios from \"axios\";\nimport { getMenuList } from \"@/api/index\";\nexport default {\n  name: \"search\",\n  props: {\n    theme: {\n      type: String,\n      default: \"darkblue\"\n    },\n    type: {\n      type: String,\n      default: \"input\"\n    }\n  },\n  data() {\n    return {\n      key: \"\",\n      list: []\n    };\n  },\n  computed: {},\n  methods: {\n    init() {\n      let menuData = this.getStore(\"menuData\");\n      if (!menuData) {\n        // 第一次加载 读取数据\n        let accessToken = this.getStore(\"accessToken\");\n        // 加载菜单\n        axios.get(getMenuList, {\n          headers: {\n            accessToken: accessToken\n          }\n        }).then(res => {\n          menuData = res.result;\n          this.list = this.getList(menuData);\n        });\n      } else {\n        menuData = JSON.parse(menuData);\n        this.list = this.getList(menuData);\n      }\n    },\n    getList(menuData) {\n      let list = [];\n      menuData.forEach(function (e) {\n        if (e.children && e.children.length > 0) {\n          // 1\n          e.children.forEach(function (c) {\n            if (c.children && c.children.length > 0) {\n              // 2\n              c.children.forEach(function (b) {\n                list.push({\n                  title: b.title,\n                  name: b.name\n                });\n              });\n            }\n          });\n        }\n      });\n      return list;\n    },\n    changeMenu(name111) {\n      if (!name111) {\n        return;\n      }\n      this.$emit(\"changeOk\", name111);\n    },\n    clear() {\n      this.$refs.select.clearSingleSelect();\n    }\n  },\n  mounted() {\n    this.init();\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}